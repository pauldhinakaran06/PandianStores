<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Biilling</title>
    <!--<script src="LoadJs.js"></script>-->
    <!--<script src="https://cdn.socket.io/4.1.3/socket.io.min.js"></script>-->
    <link rel="stylesheet" href="../css/all.css">
    <link rel="stylesheet" href="../css/jqgrid.css">
    <script src="../Scripts/jquery-3.6.0.min.js"></script>
    <!--<script src="../Scripts/dialog.js"></script>-->
    <script src="../Scripts/jquery.jqgrid.min.js"></script>
    <script src="../Scripts/html2pdf.js"></script>
    <link rel="stylesheet" href="../css/DashBoard.css">
    <link rel="stylesheet" href="../css/customalert.css">
    <script src="../js/Common_URL.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/Billing.js"></script>
    <style>
        @media print {
            body {
                margin: 0;
                font-family: monospace, Arial, sans-serif;
                font-size: 12px;
                line-height: 1.2;
            }

            #printableArea {
                width: 80mm;
                padding: 2mm;
            }

                #printableArea table {
                    width: 100%;
                    border-collapse: collapse;
                }

                #printableArea td {
                    padding: 2px 0;
                }

            .center {
                text-align: center;
            }

            .right {
                text-align: right;
            }

            .bold {
                font-weight: bold;
            }
        }
        .dash-content .title {
            left: 14%;
        }
        #grid {
            background-color: whitesmoke;
            background-size: cover; /* or 'contain' / 'auto' */
        }
        #productsgrid{
            width:100% !important;
        }
    </style>
</head>
<body>
    <nav id="Master" style="display:none">
    </nav>

    <section id="section" class="" style="width:auto;height:auto;">
        <nav>
            <div class="logo-name">
                <div class="logo-image">
                    <img src="../images/logo.png" alt="">
                </div>
                <!--<i class="uil uil-bars sidebar-toggle"></i>-->
                <p>Pandian Departmental Stores</p>
            </div>
        </nav>
        <div class="overview dash-content">

            <div class="title">
                <i class="bi bi-credit-card" style="background-color: #ffffff; color: black;"></i>
                <span class="text">Billing</span>
                <marquee width="40%" direction="left" height="50px" style="width: 31%;padding: 14px;position: relative;left: 11px;">
                    This is a sample scrolling text that has scrolls in the upper direction.
                </marquee>
            </div>
            <div class="container" style=" position: fixed; top: 0px; right: 0px; padding: 10px;">
                <div style="display: flex;justify-content: end;font-size: 1.4vw;font-weight: bold;"><span>SAM</span></div>
                <div id="Datetime" style="display: flex; justify-content: end; font-size: 1.4vw;"></div>
                
            </div>
            <div class="search-box" style="position: relative;width: 100%;display:flex;align-items: center;">
                
                <h4 style="background-color: aquamarine; display: flex; justify-content: center; height: 35px; align-items: center; width: 13%;">Customer Information</h4>
                <div class="form-group" style="width: 20%; position: relative; left: 2%;">
                    <label class="form-label" for="customerName">Customer Name:</label>
                    <input type="text" id="customerName" class="form-input" style="width: 58%; height: 23px;" autocomplete="off">
                </div>
                <div class="form-group" style="width: 20%; position: relative; left: 4%;">
                    <label class="form-label" for="phoneNumber">Phone Number:</label>
                    <input type="text" id="phoneNumber" class="form-input" style="width: 65%; height: 23px;" autocomplete="off">
                </div>
                <div style="display: flex;position: absolute;right: 0px;">
                    <h1>Total : ₹&nbsp; </h1><h1 id="totalBillDiv">0.00</h1>
                </div>
            </div>

            <table id="grid"></table>
            <div id="pager"></div>
            <!--<div class="Confirm padding" id="finaldiv" style="pointer-events:none;">
                <input type="button" class="custom-button" id="confirm" onclick="btnconfirm();" value="Confirm" />
                <input type="button" class="custom-button" id="Clear" onclick="btnClear();" value="Clear" />
                <input type="button" class="custom-button" id="confirm" onclick="btncancel();" value="Cancel" />

            </div>-->

        </div>
    </section>
    <div id="myModal" class="modal">
        <!--<div class="F-container">
        <div class="F-header">
            <h2 style=" position: relative; left: 35%;">Invoice</h2>
            <span class="close" style="left: 67%;position: relative;">&times;</span>
        </div>
        <div class="F-details">
            <div>
                <label for="customerName">Customer Name:</label>
                <input type="text" id="customerName" name="customerName">
            </div>
            <div>
                <label for="phoneNumber">Phone Number:</label>
                <input type="text" id="phoneNumber" name="phoneNumber">
            </div>
            <div>
                <label for="saleType">Sale Type:</label>
                <select id="saleType" name="saleType" style="width: 49%;">
                    <option value="cash">Cash</option>
                    <option value="gpay">GPay</option>
                    <option value="debitCard">Debit Card</option>
                </select>
            </div>
            <div>
                <label for="totalAmount">Total Amount(₹):</label>
                <span id="totalAmount"></span>
            </div>
            <button type="button" id="printBtn" onclick="BillingProcess();">Print</button>
        </div>

    </div>-->
        <div class="finalpopup-container" id="finalpopup" style="width: 30%;">
            <button class="billclose-btn" style=" top: 22px;" onclick="closeHeader('finalpopup')">X</button>
            <h3 style="background-color: aquamarine; display: flex; justify-content: center; margin-bottom: 10px; ">🛒 Checkout</h3>
            <div class="form-group">

                <label class="form-label" for="saleType" style="width: 40%;">Sale Type:</label>
                <select id="saleType" name="saleType" class="form-input" tabindex="0" autofocus>
                    <option value="cash" selected>Cash</option>
                    <option value="gpay">GPay</option>
                    <option value="debitCard">Debit Card</option>
                </select>
            </div>
            <div class="form-group" style="padding: 10px 0px 10px 0px;" id="cashamtdiv">
                <label class="form-label" for="Cashamount">Cash Amount (₹):</label>
                <input type="text" id="CashAmount" style="padding: 4px; width: 50%;"  oninput="calculateBalance()" />
            </div>
            <div class="form-group" style="padding: 0px 0px 10px 0px;" id="balamtdiv">
                <label class="form-label" for="balanceAmount">Balance (₹):</label>
                <span id="balanceAmount">0.00</span>
            </div>
            <div class="form-group" style="padding: 10px 0px 10px 0px;">
                <label class="form-label" for="totalAmount">Total Amount (₹):</label>
                <span id="totalAmount"></span>
            </div>
            <div class="form-group" style="padding: 0px 0px 10px 0px;">
                <label class="form-label" for="totalGSTAmount">Total GST Amount (₹):</label>
                <span id="totalGSTAmount"></span>
            </div>
            <div class="form-group" style="padding: 0px 0px 10px 0px;">
                <label class="form-label" for="totalBillAmount">Total Bill Amount (₹):</label>
                <span id="totalBillAmount"></span>
            </div>
            <button class="finalprintbtn" onclick="BillingProcess();">Print</button>
        </div>
        <div style="display:none;">
            <div id="printableArea">
                <div class="center bold" style="line-height: 1.2;">Pandian Department Stores</div>
                <div class="center" style="line-height: 1.2;">2#,Bypass Road,Gummidipoondi</div>
                <div class="center" style="line-height: 1.4;">GSTIN: 22AAAAA0000A1Z5</div>
                <hr>
                <table width="100%" style="font-size: 12px;">
                    <tr>
                        <td>Bill #: <span id="Bill-InvoiceNumber"></span></td>
                        <td class="right" id="bill-payment"></td>
                    </tr>
                    <tr>
                        <td>Cashier: <span id="CashierName"></span></td>
                        <td class="right">Date: <span id="InvoiceDate"></span></td>
                    </tr>
                    <tr>
                        <td>Counter: <span id="CounterNo">1</span></td>
                        <td class="right">Time: <span id="InvoiceTime"></span></td>
                    </tr>
                </table>

                <hr>
                <table border="1" cellspacing="0" cellpadding="4" width="100%" style="font-size: 12px;border: 0;">
                    <thead>
                        <tr class="bold">
                            <th>Item</th>
                            <th>Qty</th>
                            <th>Rate</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody id="bill-items">
                    </tbody>
                </table>

                <hr>
                <table width="100%" style="font-size: 12px;">
                    <tr colspan="2">
                        <td>Total Qty: <span id="bill-total-qty">0</span></td>
                        <td class="right" style="font-size: 16px;top: 9px;position: relative;">Total Amt: <span id="bill-total-amount">0.00</span></td>
                    </tr>
                    <tr>
                        <td colspan="2">Total Items: <span id="bill-total-items">0</span></td>
                        <td></td>
                    </tr>
                    </table>
                <hr>
                    <table width="100%" style="font-size: 12px;" id="cashdiv">
                        <tr>
                            <td colspan="2"></td>
                            <td class="right">Cash Amt: <span id="bill-cash">0.00</span></td>
                        </tr>
                        <tr>
                            <td colspan="2"></td>
                            <td class="right">Balance: <span id="bill-balance">0.00</span></td>
                        </tr>
                    </table>

                    <hr>
                    <table border="1" cellspacing="0" cellpadding="4" width="100%" style="font-size: 12;border: 0;">
                        <thead>
                            <tr class="bold">
                                <th>Tax %</th>
                                <th>Taxable</th>
                                <th>CGST</th>
                                <th>SGST</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="gst-summary">
                            <tr>
                                <td>0%</td>
                                <td class="right">12.00</td>
                                <td class="right">0.00</td>
                                <td class="right">0.00</td>
                                <td class="right">12.00</td>
                            </tr>
                        </tbody>
                    </table>

                    <!--<hr>
                    <table>
                        <tr>
                            <td>Round Off</td>
                            <td class="right" id="bill-roundoff">0.00</td>
                        </tr>
                        <tr class="bold">
                            <td>Final Amount</td>
                            <td class="right" id="bill-final">0.00</td>
                        </tr>
                        <tr>
                            <td>Payment Mode</td>
                            <td class="right" id="bill-payment">Cash</td>
                        </tr>
                    </table>-->

                    <hr>
                    <div class="center">*** Thank You! Visit Again ***</div>
</div>
    </div>
    </div>
    <div id="popup" class="popup-overlay">
        <div class="popup-container">
            <h2 style="text-align: center; background: aquamarine;">
                Product Details
                <button class="billclose-btn" onclick="closeHeader('productlist')">X</button>
            </h2>
            <label for="Productsearch">Search :  </label>
            <input type="text" id="Productsearch" style=" width: 55%; text-align: center;" placeholder="Search by Product Name" />
            <button class="refreshbtn" onclick="getproduct('productrefresh');"><i class="bi bi-arrow-clockwise"></i></button>
            <table id="productsgrid"></table>
            <div id="productspager"></div>
        </div>
    </div>

    <div class="alert hide">
        <span class="bi bi-exclamation-circle"></span>
        <span id="alertMessage" class="msg"></span>
        <div class="close-btn" onclick="closeAlert();">
            <span class="bi bi-x"></span>
        </div>
    </div>
    <label class="form-label hiddenTextbox" for="barcodeinput">barcodeinput:</label>
    <input type="text" class="hiddenTextbox" id="barcodeinput">
</body>
</html>